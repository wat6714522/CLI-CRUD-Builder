import { Injectable, NotFoundException } from "@nestjs/common"; 
import { InjectRepository } from "@nestjs/typeorm"; 
import { {{EntityName}} } from "../entities/{{FileName}}.entity"; 
import { Repository } from "typeorm"; 
import { Create{{EntityName}}Dto } from "../dto/create-{{FileName}}.dto"; 
import { Update{{EntityName}}Dto } from "../dto/update-{{FileName}}.dto";
import { PaginationDto } from "../dto/pagination.dto";

@Injectable()
export class {{EntityName}}Service {
    constructor(
        @InjectRepository({{EntityName}})
        private readonly {{CamelCaseName}}Repository: Repository<{{EntityName}}>, 
    ) {}

    async findOne(id: number){
        const {{CamelCaseName}} = await this.{{CamelCaseName}}Repository.findOne({
            where: {
                id,
            },
        });
        if(!{{CamelCaseName}}) throw new NotFoundException(); 
        return {{CamelCaseName}}; 
    }

    async findAll(paginationDto: PaginationDto){
        return await this.{{CamelCaseName}}Repository.find({
            skip: paginationDto.skip,
            take: paginationDto.limit ?? 10,
        })
    }

    async create(dto: Create{{EntityName}}Dto){
        return await this.{{CamelCaseName}}Repository.save(dto); 
    }

    async update(id: number, dto: Update{{EntityName}}Dto){
        return await this.{{CamelCaseName}}Repository.update({id}, dto); 
    }

    async delete(id: number){
        return await this.{{CamelCaseName}}Repository.delete({
            id,
        });
    }
}
